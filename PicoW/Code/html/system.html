<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>System - PicoSense</title>
<style>
body{font-family:Arial;background:#f5f5f5;margin:10px;}
button{padding:10px 20px;border:none;border-radius:4px;background:#007acc;color:#fff;cursor:pointer;}
button:hover{background:#005fa3;}
input{padding:5px;margin:5px 0;border-radius:4px;border:1px solid #ccc;width:150px;}
.section{background:#fff;padding:10px;border-radius:6px;box-shadow:0 1px 3px rgba(0,0,0,.1);}
</style>
</head>
<body>
<h1>System Controls</h1>

<div class="section">
<h3>WiFi Settings</h3>
SSID:<input id="ws" type="text"><br>
Password:<input id="wp" type="text"><br>
<button onclick="saveWiFi()">Save WiFi</button>
</div>

<div class="section">
<h3>System</h3>
<button onclick="if(confirm('Reboot Pico?'))fetch('/reboot')">Reboot</button>
</div>

<button onclick="location.href='/'">Back to Dashboard</button>

<script>
function loadWiFi(){
    fetch("/getwifi").then(r=>r.json()).then(j=>{
        document.getElementById("ws").value=j.ssid||"";
        document.getElementById("wp").value=j.password||"";
    });
}
function saveWiFi(){
    var s=encodeURIComponent(document.getElementById("ws").value);
    var p=encodeURIComponent(document.getElementById("wp").value);
    fetch("/setwifi?ssid="+s+"&pass="+p)
        .then(_=>alert("Saved. Rebooting..."))
        .then(_=>fetch("/reboot"));
}
loadWiFi();
</script>
</body>
</html>
